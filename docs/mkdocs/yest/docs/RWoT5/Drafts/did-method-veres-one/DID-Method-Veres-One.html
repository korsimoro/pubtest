<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        /* --- EXAMPLES --- */

        div.example-title {
            min-width: 7.5em;
            color: #b9ab2d;
        }

        div.example-title span {
            text-transform: uppercase;
        }

        aside.example,
        div.example,
        div.illegal-example {
            padding: 0.5em;
            margin: 1em 0;
            position: relative;
            clear: both;
        }

        div.illegal-example {
            color: red
        }

        div.illegal-example p {
            color: black
        }

        aside.example,
        div.example {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid;
            border-color: #e0cb52;
            background: #fcfaee;
        }

        aside.example div.example {
            border-left-width: .1em;
            border-color: #999;
            background: #fff;
        }

        aside.example div.example div.example-title {
            color: #999;
        }
    </style>
    <style>
        /* --- ISSUES/NOTES --- */

        div.issue-title,
        div.note-title,
        div.ednote-title,
        div.warning-title {
            padding-right: 1em;
            min-width: 7.5em;
            color: #b9ab2d;
        }

        div.issue-title {
            color: #e05252;
        }

        div.note-title,
        div.ednote-title {
            color: #2b2;
        }

        div.warning-title {
            color: #f22;
        }

        div.issue-title span,
        div.note-title span,
        div.ednote-title span,
        div.warning-title span {
            text-transform: uppercase;
        }

        div.note,
        div.issue,
        div.ednote,
        div.warning {
            margin-top: 1em;
            margin-bottom: 1em;
        }

        .note>p:first-child,
        .ednote>p:first-child,
        .issue>p:first-child,
        .warning>p:first-child {
            margin-top: 0
        }

        .issue,
        .note,
        .ednote,
        .warning {
            padding: .5em;
            border-left-width: .5em;
            border-left-style: solid;
        }

        div.issue,
        div.note,
        div.ednote,
        div.warning {
            padding: 1em 1.2em 0.5em;
            margin: 1em 0;
            position: relative;
            clear: both;
        }

        span.note,
        span.ednote,
        span.issue,
        span.warning {
            padding: .1em .5em .15em;
        }

        .issue {
            border-color: #e05252;
            background: #fbe9e9;
        }

        .note,
        .ednote {
            border-color: #52e052;
            background: #e9fbe9;
        }

        .warning {
            border-color: #f11;
            border-width: .2em;
            border-style: solid;
            background: #fbe9e9;
        }

        .warning-title:before {
            content: "âš ";
            /*U+26A0 WARNING SIGN*/
            font-size: 3em;
            float: left;
            height: 100%;
            padding-right: .3em;
            vertical-align: top;
            margin-top: -0.5em;
        }

        li.task-list-item {
            list-style: none;
        }

        input.task-list-item-checkbox {
            margin: 0 0.35em 0.25em -1.6em;
            vertical-align: middle;
        }
    </style>
    <title>Veres One DID Method 1.0</title>

    <!--
      === NOTA BENE ===
      For the three scripts below, if your spec resides on dev.w3 you can check them
      out in the same tree and use relative links so that they'll work offline,
     -->

    <script src="./common.js"></script>

    <style>
        pre .highlight {
            font-weight: bold;
            color: green;
        }

        pre .comment {
            font-weight: bold;
            color: Gray;
        }
    </style>
    <script type="text/javascript">
        // Promises 
        var _eid_promises = {};
        // Turn the incoming message from extension 
        // into pending Promise resolving 
        window.addEventListener("message", function(event) {
            if (event.source !== window) return;
            if (event.data.src && (event.data.src === "background.js")) {
                console.log("Page received: ");
                console.log(event.data);
                // Get the promise 
                if (event.data.nonce) {
                    var p = _eid_promises[event.data.nonce];
                    // resolve 
                    if (event.data.result === "ok") {
                        if (event.data.signature !== undefined) {
                            p.resolve({
                                hex: event.data.signature
                            });
                        } else if (event.data.version !== undefined) {
                            p.resolve(event.data.extension + "/" + event.data.version);
                        } else if (event.data.cert !== undefined) {
                            p.resolve({
                                hex: event.data.cert
                            });
                        } else {
                            console.log("No idea how to handle message");
                            console.log(event.data);
                        }
                    } else {
                        // reject 
                        p.reject(new Error(event.data.result));
                    }
                    delete _eid_promises[event.data.nonce];
                } else {
                    console.log("No nonce in event msg");
                }
            }
        }, false);


        function TokenSigning() {
            function nonce() {
                var val = "";
                var hex = "abcdefghijklmnopqrstuvwxyz0123456789";
                for (var i = 0; i < 16; i++) val += hex.charAt(Math.floor(Math.random() * hex.length));
                return val;
            }

            function messagePromise(msg) {
                return new Promise(function(resolve, reject) {
                    // amend with necessary metadata 
                    msg["nonce"] = nonce();
                    msg["src"] = "page.js";
                    // send message 
                    window.postMessage(msg, "*");
                    // and store promise callbacks 
                    _eid_promises[msg.nonce] = {
                        resolve: resolve,
                        reject: reject
                    };
                });
            }
            this.getCertificate = function(options) {
                var msg = {
                    type: "CERT",
                    lang: options.lang,
                    filter: options.filter
                };
                console.log("getCertificate()");
                return messagePromise(msg);
            };
            this.sign = function(cert, hash, options) {
                var msg = {
                    type: "SIGN",
                    cert: cert.hex,
                    hash: hash.hex,
                    hashtype: hash.type,
                    lang: options.lang,
                    info: options.info
                };
                console.log("sign()");
                return messagePromise(msg);
            };
            this.getVersion = function() {
                console.log("getVersion()");
                return messagePromise({
                    type: "VERSION"
                });
            };
        }
    </script>
    <style id="respec-mainstyle">
        /*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/
        /* Override code highlighter background */

        .hljs {
            background: transparent !important;
        }
        /* --- INLINES --- */

        em.rfc2119 {
            text-transform: lowercase;
            font-style: normal;
            color: #900;
        }

        h1 abbr,
        h2 abbr,
        h3 abbr,
        h4 abbr,
        h5 abbr,
        h6 abbr,
        a abbr {
            border: none;
        }

        dfn {
            font-weight: bold;
        }

        a.internalDFN {
            color: inherit;
            border-bottom: 1px solid #99c;
            text-decoration: none;
        }

        a.externalDFN {
            color: inherit;
            border-bottom: 1px dotted #ccc;
            text-decoration: none;
        }

        a.bibref {
            text-decoration: none;
        }

        cite .bibref {
            font-style: normal;
        }

        code {
            color: #c83500;
        }

        th code {
            color: inherit;
        }
        /* --- TOC --- */

        .toc a,
        .tof a {
            text-decoration: none;
        }

        a .secno,
        a .figno {
            color: #000;
        }

        ul.tof,
        ol.tof {
            list-style: none outside none;
        }

        .caption {
            margin-top: 0.5em;
            font-style: italic;
        }
        /* --- TABLE --- */

        table.simple {
            border-spacing: 0;
            border-collapse: collapse;
            border-bottom: 3px solid #005a9c;
        }

        .simple th {
            background: #005a9c;
            color: #fff;
            padding: 3px 5px;
            text-align: left;
        }

        .simple th[scope="row"] {
            background: inherit;
            color: inherit;
            border-top: 1px solid #ddd;
        }

        .simple td {
            padding: 3px 10px;
            border-top: 1px solid #ddd;
        }

        .simple tr:nth-child(even) {
            background: #f0f6ff;
        }
        /* --- DL --- */

        .section dd>p:first-child {
            margin-top: 0;
        }

        .section dd>p:last-child {
            margin-bottom: 0;
        }

        .section dd {
            margin-bottom: 1em;
        }

        .section dl.attrs dd,
        .section dl.eldef dd {
            margin-bottom: 0;
        }

        #issue-summary>ul,
        .respec-dfn-list {
            column-count: 2;
        }

        #issue-summary li,
        .respec-dfn-list li {
            list-style: none;
        }

        details.respec-tests-details {
            margin-left: 1em;
            display: inline-block;
            vertical-align: top;
        }

        details.respec-tests-details>* {
            padding-right: 2em;
        }

        details.respec-tests-details[open] {
            z-index: 999999;
            position: absolute;
            border: thin solid #cad3e2;
            border-radius: .3em;
            background-color: white;
            padding-bottom: .5em;
        }

        details.respec-tests-details[open]>summary {
            border-bottom: thin solid #cad3e2;
            padding-left: 1em;
            margin-bottom: 1em;
            line-height: 2em;
        }

        details.respec-tests-details>ul {
            width: 100%;
            margin-top: -0.3em;
        }

        details.respec-tests-details>li {
            padding-left: 1em;
        }

        @media print {
            .removeOnSave {
                display: none;
            }
        }
    </style>
    <style>
        /*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/

        .hljs {
            display: block;
            overflow-x: auto;
            padding: 0.5em;
            color: #333;
            background: #f8f8f8;
        }

        .hljs-comment,
        .hljs-quote {
            color: #998;
            font-style: italic;
        }

        .hljs-keyword,
        .hljs-selector-tag,
        .hljs-subst {
            color: #333;
            font-weight: bold;
        }

        .hljs-number,
        .hljs-literal,
        .hljs-variable,
        .hljs-template-variable,
        .hljs-tag .hljs-attr {
            color: #008080;
        }

        .hljs-string,
        .hljs-doctag {
            color: #d14;
        }

        .hljs-title,
        .hljs-section,
        .hljs-selector-id {
            color: #900;
            font-weight: bold;
        }

        .hljs-subst {
            font-weight: normal;
        }

        .hljs-type,
        .hljs-class .hljs-title {
            color: #458;
            font-weight: bold;
        }

        .hljs-tag,
        .hljs-name,
        .hljs-attribute {
            color: #000080;
            font-weight: normal;
        }

        .hljs-regexp,
        .hljs-link {
            color: #009926;
        }

        .hljs-symbol,
        .hljs-bullet {
            color: #990073;
        }

        .hljs-built_in,
        .hljs-builtin-name {
            color: #0086b3;
        }

        .hljs-meta {
            color: #999;
            font-weight: bold;
        }

        .hljs-deletion {
            background: #fdd;
        }

        .hljs-addition {
            background: #dfd;
        }

        .hljs-emphasis {
            font-style: italic;
        }

        .hljs-strong {
            font-weight: bold;
        }
    </style>
    <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/cg-draft">
    <link rel="canonical" href="https://www.w3.org/TR/didm-veres-one/">
    <script id="initialUserConfig" type="application/json">
        {
            "specStatus": "CG-DRAFT",
            "shortName": "didm-veres-one",
            "subtitle": "A decentralized identifier method for the Veres One Ledger",
            "localBiblio": {
                "REST": {
                    "title": "Architectural Styles and the Design of Network-based Software Architectures",
                    "date": "2000",
                    "href": "http://www.ics.uci.edu/~fielding/pubs/dissertation/",
                    "authors": [
                        "Fielding, Roy Thomas"
                    ],
                    "publisher": "University of California, Irvine."
                },
                "VC-USECASES": {
                    "title": "Verifiable Claims Use Cases",
                    "href": "https://www.w3.org/TR/verifiable-claims-use-cases/",
                    "authors": [
                        "Shane McCarron",
                        "Daniel Burnett",
                        "Gregg Kellogg",
                        "Brian Sletten",
                        "Manu Sporny"
                    ],
                    "status": "FPWD",
                    "publisher": "Verifiable Claims Working Group"
                },
                "HTTP-SIGNATURES": {
                    "aliasOf": "http-signatures"
                },
                "MACAROONS": {
                    "title": "Macaroons",
                    "href": "http://macaroons.io/",
                    "authors": [
                        "Arnar Birgisson",
                        "Joe Gibbs Politz",
                        "Ãšlfar Erlingsson",
                        "Ankur Taly",
                        "Michael Vrable",
                        "Mark Lentczner"
                    ],
                    "status": "unofficial",
                    "publisher": "Credentials Community Group"
                },
                "OPEN-BADGES": {
                    "title": "Open Badges",
                    "href": "https://github.com/openbadges/openbadges-specification",
                    "authors": [
                        "Brian Brennan",
                        "Mike Larsson",
                        "Chris McAvoy",
                        "Nate Otto",
                        "Kerri Lemoie"
                    ],
                    "status": "BA-DRAFT",
                    "publisher": "Badge Alliance Standard Working Group"
                },
                "RDF-NORMALIZATION": {
                    "title": "RDF Dataset Normalization",
                    "href": "http://json-ld.github.io/normalization/spec/",
                    "authors": [
                        "Dave Longley",
                        "Manu Sporny"
                    ],
                    "status": "CG-DRAFT",
                    "publisher": "Credentials W3C Community Group"
                }
            },
            "github": "https://github.com/w3c-ccg/didm-veres-one",
            "includePermalinks": false,
            "edDraftURI": "https://w3c-ccg.github.io/didm-veres-one/",
            "editors": [{
                    "name": "Manu Sporny",
                    "url": "http://manu.sporny.org/",
                    "company": "Digital Bazaar",
                    "companyURL": "https://digitalbazaar.com/"
                },
                {
                    "name": "Dave Longley",
                    "url": "https://github.com/dlongley",
                    "company": "Digital Bazaar",
                    "companyURL": "https://digitalbazaar.com/"
                }
            ],
            "authors": [{
                    "name": "Manu Sporny",
                    "url": "http://manu.sporny.org/",
                    "company": "Digital Bazaar",
                    "companyURL": "https://digitalbazaar.com/"
                },
                {
                    "name": "Dave Longley",
                    "url": "https://github.com/dlongley",
                    "company": "Digital Bazaar",
                    "companyURL": "https://digitalbazaar.com/"
                }
            ],
            "wg": "Credentials Community Group",
            "wgURI": "https://www.w3.org/community/credentials/",
            "wgPublicList": "public-credentials",
            "wgPatentURI": "https://www.w3.org/community/about/agreements/cla/",
            "maxTocLevel": 4,
            "inlineCSS": true,
            "publishISODate": "2017-10-01T00:00:00.000Z",
            "generatedSubtitle": "Draft Community Group Report 05 October 2017"
        }
    </script>
    <meta name="generator" content="ReSpec 16.2.2">
    <meta name="description" content="The Veres One Ledger is a permissionless public ledger designed specifically
for the creation and management of
decentralized identifiers
(DIDs).
Veres One DIDs are
self-sovereign
identifiers that may be used by people, organizations, and digital devices
to establish an identifier that is under their control.
Veres One DIDs are useful in ecosystems where one needs to issue, store, and use
Verifiable Claims. This
specification defines how a developer may create and update DIDs in the Veres
One Ledger.">
</head>

<body aria-busy="false" class="h-entry" style="" id="respecDocument">
    <div class="head" role="contentinfo" id="respecHeader">
        <p>
            <a class="logo" href="https://www.w3.org/"><img width="72" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" alt="W3C"></a>
        </p>
        <h1 class="title p-name" id="title">Veres One DID Method 1.0</h1>
        <h2 id="subtitle">A decentralized identifier method for the Veres One Ledger</h2>
        <h2 id="draft-community-group-report-01-october-2017">Draft Community Group Report <time class="dt-published" datetime="2017-10-01">01 October 2017</time></h2>
        <dl>
            <dt>Latest editor's draft:</dt>
            <dd><a href="https://w3c-ccg.github.io/didm-veres-one/">https://w3c-ccg.github.io/didm-veres-one/</a></dd>
            <dt>Editors:</dt>
            <dd class="p-author h-card vcard"><a class="u-url url p-name fn" href="http://manu.sporny.org/">Manu Sporny</a>, <a class="p-org org h-org h-card" href="https://digitalbazaar.com/">Digital Bazaar</a></dd>
            <dd class="p-author h-card vcard"><a class="u-url url p-name fn" href="https://github.com/dlongley">Dave Longley</a>, <a class="p-org org h-org h-card" href="https://digitalbazaar.com/">Digital Bazaar</a></dd>

            <dt>Authors:</dt>
            <dd class="p-author h-card vcard"><a class="u-url url p-name fn" href="http://manu.sporny.org/">Manu Sporny</a>, <a class="p-org org h-org h-card" href="https://digitalbazaar.com/">Digital Bazaar</a></dd>
            <dd class="p-author h-card vcard"><a class="u-url url p-name fn" href="https://github.com/dlongley">Dave Longley</a>, <a class="p-org org h-org h-card" href="https://digitalbazaar.com/">Digital Bazaar</a></dd>

            <dt>Participate:</dt>
            <dd>
                <a href="https://github.com/w3c-ccg/didm-veres-one">
                      GitHub w3c-ccg/didm-veres-one
                    </a>
            </dd>
            <dd>
                <a href="https://github.com/w3c-ccg/didm-veres-one/issues/">
                      File a bug
                    </a>
            </dd>
            <dd>
                <a href="https://github.com/w3c-ccg/didm-veres-one/commits/gh-pages">
                      Commit history
                    </a>
            </dd>
        </dl>
        <p class="copyright">
            <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> Â© 2017 the Contributors to the Veres One DID Method 1.0 Specification, published by the
            <a href="https://www.w3.org/community/credentials/">Credentials Community Group</a> under the
            <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>. A human-readable <a href="https://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available.
        </p>
        <hr title="Separator for header">
    </div>
    <section id="abstract" class="introductory">
        <h2 id="abstract-0">Abstract</h2>
        <p>
            The Veres One Ledger is a permissionless public ledger designed specifically for the creation and management of
            <a href="https://w3c-ccg.github.io/did-spec/">decentralized identifiers</a> (DIDs). Veres One DIDs are
            <a href="https://www.coindesk.com/path-self-sovereign-identity/">self-sovereign
identifiers</a> that may be used by people, organizations, and digital devices to establish an identifier that is under their control. Veres One DIDs are useful in ecosystems where one needs to issue, store, and use
            <a href="https://w3c.github.io/vc-data-model/">Verifiable Claims</a>. This specification defines how a developer may create and update DIDs in the Veres One Ledger.
        </p>
    </section>

    <section id="sotd" class="introductory">
        <h2 id="status-of-this-document">Status of This Document</h2>
        <p>
            This specification was published by the <a href="https://www.w3.org/community/credentials/">Credentials Community Group</a>. It is not a W3C Standard nor is it on the W3C Standards Track. Please note that under the
            <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply. Learn more about
            <a href="https://www.w3.org/community/">W3C Community and Business Groups</a>.
        </p>

        <p>
            Comments regarding this document are welcome. Please file issues directly on <a href="https://github.com/w3c-ccg/didm-veres-one/issues/">GitHub</a>, or send them to
            <a href="mailto:public-credentials@w3.org">public-credentials@w3.org</a> (<a href="mailto:public-credentials-request@w3.org?subject=subscribe">subscribe</a>,
            <a href="https://lists.w3.org/Archives/Public/public-credentials/">archives</a>).
        </p>

        <p>
            Work on this specification has been funded in part by the United States Department of Homeland Security's Science and Technology Directorate under contract HSHQDC-17-C-00019. The content of this specification does not necessarily reflect the position
            or the policy of the U.S. Government and no official endorsement should be inferred.
        </p>

        <p>
            Work on this specification has also been supported by the Rebooting the Web of Trust group facilitated by Christopher Allen, Shannon Appelcline, Kiara Robles, Kaliya Young, Brian Weller, and Betty Dhamers.
        </p>


        <p>If you wish to make comments regarding this document, please send them to
            <a href="mailto:public-credentials@w3.org">public-credentials@w3.org</a> (<a href="mailto:public-credentials-request@w3.org?subject=subscribe">subscribe</a>,
            <a href="https://lists.w3.org/Archives/Public/public-credentials/">archives</a>).</p>

    </section>
    <nav id="toc">
        <h2 class="introductory" id="table-of-contents">Table of Contents</h2>
        <ol class="toc" role="directory">
            <li class="tocline"><a href="#introduction" class="tocxref"><span class="secno">1. </span>Introduction</a></li>
            <li class="tocline"><a href="#core-data-model" class="tocxref"><span class="secno">2. </span>Core Data Model</a></li>
            <li class="tocline"><a href="#basic-concepts" class="tocxref"><span class="secno">3. </span>Basic Concepts</a>
                <ol class="toc">
                    <li class="tocline"><a href="#authentication" class="tocxref"><span class="secno">3.1 </span>Authentication</a></li>
                    <li class="tocline"><a href="#authorization" class="tocxref"><span class="secno">3.2 </span>Authorization</a></li>
                    <li class="tocline"><a href="#service-descriptions" class="tocxref"><span class="secno">3.3 </span>Service Descriptions</a></li>
                </ol>
            </li>
            <li class="tocline"><a href="#operations" class="tocxref"><span class="secno">4. </span>Operations</a>
                <ol class="toc">
                    <li class="tocline"><a href="#discovering-service-endpoints" class="tocxref"><span class="secno">4.1 </span>Discovering Service Endpoints</a></li>
                    <li class="tocline"><a href="#creating-a-did" class="tocxref"><span class="secno">4.2 </span>Creating a DID</a></li>
                    <li class="tocline"><a href="#updating-a-did-document" class="tocxref"><span class="secno">4.3 </span>Updating a DID Document</a></li>
                    <li class="tocline"><a href="#delegating-control" class="tocxref"><span class="secno">4.4 </span>Delegating Control</a></li>
                    <li class="tocline"><a href="#key-rotation-and-transferring-control" class="tocxref"><span class="secno">4.5 </span>Key Rotation and Transferring Control</a></li>
                    <li class="tocline"><a href="#recovering-a-did" class="tocxref"><span class="secno">4.6 </span>Recovering a DID</a></li>
                </ol>
            </li>
            <li class="tocline"><a href="#appendix-a:-examples" class="tocxref"><span class="secno">5. </span>Appendix A: Examples</a>
                <ol class="toc">
                    <li class="tocline"><a href="#typical-did-document" class="tocxref"><span class="secno">5.1 </span>Typical DID Document</a></li>
                    <li class="tocline"><a href="#legacy-did-document" class="tocxref"><span class="secno">5.2 </span>Legacy DID Document</a></li>
                </ol>
            </li>
        </ol>
    </nav>

    <section id="introduction">
        <!--OddPage-->
        <h2 id="x1.-introduction"><span class="secno">1. </span>Introduction</h2>

        <div class="issue" id="issue-1">
            <div class="issue-title marker" aria-level="3" role="heading" id="h-issue1"><span>Issue 1</span></div>
            <p class="">
                TBD: This section will provide a gentle introduction to the purpose of the Veres One Ledger, expanding upon the abstract of the document.
            </p>
        </div>

    </section>

    <section id="core-data-model">
        <!--OddPage-->
        <h2 id="x2.-core-data-model"><span class="secno">2. </span>Core Data Model</h2>

        <div class="issue" id="issue-2">
            <div class="issue-title marker" aria-level="3" role="heading" id="h-issue2"><span>Issue 2</span></div>
            <p class="">
                TBD: This section will describe the use of the Web Ledger, JSON-LD, and the DID spec to build the Veres One Ledger.
            </p>
        </div>

    </section>

    <section id="basic-concepts">
        <!--OddPage-->
        <h2 id="x3.-basic-concepts"><span class="secno">3. </span>Basic Concepts</h2>

        <section id="authentication">
            <h3 id="x3.1-authentication"><span class="secno">3.1 </span>Authentication</h3>

            <p>
                Authentication is the process the ledger uses to determine if an entity is associated with a DID.
            </p>

            <div class="example">
                <div class="example-title marker"><span>Example 1</span><span style="text-transform: none">: Expressing authentication credentials</span></div>
                <pre class="nohighlight">{
  "@context": "https://w3id.org/veres-one/v1",
  "id": "did:v1:215cb1dc-1f44-4695-a07f-97649cad9938",
  <span class="highlight">"authenticationCredential": [... array of acceptable authentication credentials ...]</span>
}</pre>
            </div>

            <p>
                A detailed example of a valid set of authentication credentials follows:
            </p>

            <div class="example">
                <div class="example-title marker"><span>Example 2</span><span style="text-transform: none">: Detailed example of authentication credentials entry</span></div>
                <pre class="nohighlight">{
  "@context": "https://w3id.org/veres-one/v1",
  "id": "did:v1:215cb1dc-1f44-4695-a07f-97649cad9938",
  "authenticationCredential": [{
    "type": "RsaSignature2017",
    "publicKey": {
      "id": "did:v1:215cb1dc-1f44-4695-a07f-97649cad9938/keys/2",
      "type": "CryptographicKey",
      "owner": "did:v1:215cb1dc-1f44-4695-a07f-97649cad9938",
      "publicKeyPem": "-----BEGIN PUBLIC KEY...END PUBLIC KEY-----\r\n",
    }
  }]
}</pre>
            </div>

        </section>

        <section id="authorization">
            <h3 id="x3.2-authorization"><span class="secno">3.2 </span>Authorization</h3>

            <p>
                Authorization is the process the ledger uses to determine what an entity may to do the DID Document.
            </p>

            <div class="example">
                <div class="example-title marker"><span>Example 3</span></div>
                <pre class="nohighlight" title="">{
  "@context": "https://w3id.org/veres-one/v1",
  "id": "did:v1:215cb1dc-1f44-4695-a07f-97649cad9938",
  <span class="highlight">"authorizationCapability": [... array of capability descriptions ...]</span>
}</pre>
            </div>

            <p>
                A detailed example of a valid set of authorization capability descriptions follows:
            </p>

            <div class="example">
                <div class="example-title marker"><span>Example 4</span></div>
                <pre class="nohighlight" title="">{
  "@context": "https://w3id.org/veres-one/v1",
  "id": "did:v1:215cb1dc-1f44-4695-a07f-97649cad9938",
  // proof of update authorization may be provided by digital wallet + friend OR
  // by mobile phone
  "authorizationCapability": [{
    // this entity may update any field in this DID Document using any
    // authentication mechanism understood by the ledger
    "permission": "UpdateDidDocument",
    "entity": "did:v1:215cb1dc-1f44-4695-a07f-97649cad9938"
  }, {
    // this entity may update the authenticationCredential field in this
    // DID Document as long as they authenticate with RsaSignature2017
    "entity": "did:v1:b5f8c320-f7ca-4869-85e6-a1bcbf825b2a",
    "permission": "UpdateDidDocument",
    "field": ["authenticationCredential"],
    "permittedProofType": [{
      "proofType": "RsaSignature2017"
    }]
  }, {
    // anyone may update the authenticationCredential and writeAuthorization
    // fields as long as they provide a specific multi-signature proof
    "permission": "UpdateDidDocument",
    "field": ["authenticationCredential", "authorizationCapability"],
    "permittedProofType": [{
      "proofType": "RsaSignature2017",
      "minimumSignatures": 3,
      "authenticationCredential": [{
        "id": "did:v1:304ebc3e-7997-4bf4-a915-dd87e8455941/keys/123",
        "type": "RsaCryptographicKey",
        "owner": "did:v1:304ebc3e-7997-4bf4-a915-dd87e8455941",
        "publicKeyPem": "-----BEGIN PUBLIC KEY...END PUBLIC KEY-----\r\n"
      }, {
        "id": "did:v1:0f22346a-a360-4f3e-9b42-3366e348e941/keys/foo",
        "type": "RsaCryptographicKey",
        "owner": "did:v1:0f22346a-a360-4f3e-9b42-3366e348e941",
        "publicKeyPem": "-----BEGIN PUBLIC KEY...END PUBLIC KEY-----\r\n"
      }, {
        "id": "did:v1:a8d00377-e9f1-44df-a1b9-55072e13262a/keys/abc",
        "type": "RsaCryptographicKey",
        "owner": "did:v1:a8d00377-e9f1-44df-a1b9-55072e13262a",
        "publicKeyPem": "-----BEGIN PUBLIC KEY...END PUBLIC KEY-----\r\n"
      }]
    }]
}</pre>
            </div>

        </section>

        <section id="service-descriptions">
            <h3 id="x3.3-service-descriptions"><span class="secno">3.3 </span>Service Descriptions</h3>


            <p>
                Services may be listed by including them at the top-level of the DID Document.
            </p>

            <div class="example">
                <div class="example-title marker"><span>Example 5</span><span style="text-transform: none">: Simple example of a service description</span></div>
                <pre class="nohighlight">{
  "@context": "https://w3id.org/veres-one/v1",
  "id": "did:v1:215cb1dc-1f44-4695-a07f-97649cad9938",
   <span class="highlight">"credentialRepositoryService": "https://wallet.veres.io/"</span>
}</pre>
            </div>

            <p>
                A detailed example of the expression of a service description follows:
            </p>

            <div class="example">
                <div class="example-title marker"><span>Example 6</span></div>
                <pre class="nohighlight" title="">{
  "@context": "https://w3id.org/veres-one/v1",
  "id": "did:v1:215cb1dc-1f44-4695-a07f-97649cad9938",
  "credentialRepositoryService": [{
    // the verifiable credential repository service
    "id": "did:v1:5d6c3b20-56a9-42e1-bfc8-ed7e685c9039",
    "type": "VerifiableCredentialRepository",
    "url": "https://wallet.veres.io/",
    "description": "Pat Doe's Digital Wallet"
  }]
}</pre>
            </div>

        </section>

    </section>

    <section id="operations">
        <!--OddPage-->
        <h2 id="x4.-operations"><span class="secno">4. </span>Operations</h2>

        <p>
            Every conforming Veres Ledger node <em class="rfc2119" title="MUST">MUST</em> expose at least the following HTTP endpoints:
        </p>

        <table class="simple">
            <thead>
                <tr>
                    <th>Service</th>
                    <th>Example URL</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>veresOneCreateService</td>
                    <td>POST /dids</td>
                    <td>Create a new DID.</td>
                </tr>
                <tr>
                    <td>veresOneReadService</td>
                    <td>GET /dids/{did}</td>
                    <td>Gets an existing DID Document.</td>
                </tr>
                <tr>
                    <td>veresOneUpdateService</td>
                    <td>POST /dids/{did}</td>
                    <td>Update an existing DID Document.</td>
                </tr>
            </tbody>
        </table>

        <section id="discovering-service-endpoints">
            <h3 id="x4.1-discovering-service-endpoints"><span class="secno">4.1 </span>Discovering Service Endpoints</h3>

            <p>
                A website may provide service endpoint discovery by embedding JSON-LD in their top-most HTML web page (e.g. at <code>https://example.com/</code>):
            </p>

            <div class="example">
                <div class="example-title marker"><span>Example 7</span><span style="text-transform: none">: Example of HTML-based service description</span></div>
                <pre class="highlight hljs xml" aria-busy="false" aria-live="polite"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Example Website<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"style.css"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"script.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"application/ld+json"</span>&gt;</span><span class="javascript">
{
  <span class="hljs-string">"@context"</span>: <span class="hljs-string">"https://w3id.org/veres-one/v1"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-string">"https://example.com/"</span>,
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"Example Website"</span>,
  <span class="hljs-string">"veresOneCreateService"</span>: <span class="hljs-string">"https://example.com/veres-one/dids"</span>,
  <span class="hljs-string">"veresOneReadService"</span>: <span class="hljs-string">"https://example.com/veres-one/dids/"</span>,
  <span class="hljs-string">"veresOneUpdateService"</span>: <span class="hljs-string">"https://example.com/veres-one/dids/"</span>
}
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- page content --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></pre>
            </div>

            <p>
                Service descriptions may also be requested via content negotiation. In the following example a JSON-compatible service description is provided (e.g. <code>curl -H "Accept: application/json" https://example.com/</code>):
            </p>

            <div class="example">
                <div class="example-title marker"><span>Example 8</span><span style="text-transform: none">: Example of a JSON-based service description</span></div>
                <pre class="highlight hljs json" aria-busy="false" aria-live="polite">{
  <span class="hljs-attr">"@context"</span>: <span class="hljs-string">"https://w3id.org/veres-one/v1"</span>,
  <span class="hljs-attr">"id"</span>: <span class="hljs-string">"https://example.com/"</span>,
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Example Website"</span>,
  <span class="hljs-attr">"veresOneCreateService"</span>: <span class="hljs-string">"https://example.com/veres-one/dids"</span>,
  <span class="hljs-attr">"veresOneReadService"</span>: <span class="hljs-string">"https://example.com/veres-one/dids/"</span>,
  <span class="hljs-attr">"veresOneUpdateService"</span>: <span class="hljs-string">"https://example.com/veres-one/dids/"</span>
}</pre>
            </div>

        </section>

        <section id="creating-a-did">
            <h3 id="x4.2-creating-a-did"><span class="secno">4.2 </span>Creating a DID</h3>

            <p>
                A DID is created by performing an HTTP POST of a signed DID Document to the <code>veresOneCreateService</code>. The following HTTP status codes are defined for this service:
            </p>

            <table class="simple">
                <thead>
                    <tr>
                        <th style="white-space: nowrap">HTTP Status</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>201</td>
                        <td>
                            DID creation request was successful. The HTTP <code>Location</code> header will contain the URL for the newly created DID Document.
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>DID creation request failed.</td>
                    </tr>
                    <tr>
                        <td>409</td>
                        <td>A duplicate DID exists.</td>
                    </tr>
                </tbody>
            </table>

            <p>
                An example exchange of DID creation request is shown below:
            </p>

            <div class="example">
                <div class="example-title marker"><span>Example 9</span><span style="text-transform: none">: DID creation request</span></div>
                <pre class="highlight hljs http" aria-busy="false" aria-live="polite"><span class="hljs-keyword">POST</span> <span class="hljs-string">/dids</span> HTTP/1.1
<span class="hljs-attribute">Host</span>: example.com
<span class="hljs-attribute">Content-Type</span>: application/ld+json
<span class="hljs-attribute">Content-Length</span>: 1062
<span class="hljs-attribute">Accept</span>: application/ld+json, application/json, text/plain, */*
<span class="hljs-attribute">Accept-Encoding</span>: gzip, deflate

<span class="undefined">{
  "@context": "https://w3id.org/webledger/v1",
  "type": "WebLedgerEvent",
  "operation": "Create",
  "input": [{
    "@context": "https://w3id.org/veres-one/v1",
    "id": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84",
    "authorizationCapability": [{
      "permission": "UpdateDidDocument",
      "entity": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84",
      "permittedProofType": [{
        "proofType": "LinkedDataSignature2015"
      }, {
        "proofType": "EquihashProof2017",
        "equihashParameterAlgorithm": "VeresOne2017"
      }]
    }],
    "authenticationCredential": [{
      "id": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84/keys/1",
      "type": "CryptographicKey",
      "owner": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84",
      "publicKeyPem": "-----BEGIN PUBLIC KEY-----\r\n
        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmbDqPu6IKHiiIQ4d0AQ6\r\n
        PBduDhUUVqyQirvxqsdcNdKgZ2L8whBml/nTyuB4cd+hHrsfMDiHiT5kX2pbZ7Yy\r\n
        2ctWkGw8e0J94CbwVh2H15gBQBUCjLiGvVIHO2pni693qmre+3Ya2NJ8gGwPLJ7h\r\n
        TLca2b2dX0y16qu0MT0osUGGEoPsdg6ibD2pxnADS3GNPObHT12GrAuxjYFMHecF\r\n
        A4hLZ8U+MIcVmHZuokqqbcyJyjOV+kmhFNeTKFP5P5U8HA3Y42/rE1UJp/wyy7Lc\r\n
        ZAvq0t75ddXKyvYh5dkzxxeeELNKNWVxJ2yvgAr0SatLEPzxJoeYdCyU5N5E22Fj\r\n
        jQIDAQAB\r\n-----END PUBLIC KEY-----\r\n"
    }]
  }],
  "signature": [{
    "type": "EquihashProof2017",
    "equihashParameterN": 64,
    "equihashParameterK": 3,
    "nonce": "AQAAAA==",
    "proofValue": "AAAaPwABxrIAAFOKAAGo4QAAVW0AAN7cAACXcgABjEI="
  }, {
    "type": "LinkedDataSignature2015",
    "created": "2017-09-30T02:54:31Z",
    "creator": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84/keys/1",
    "signatureValue": "SNMbsPqLnB+hJFhXzS6hcpZnm9cGvSZZg7o26UYnyGYTvKder/S+Xk
      hNhXisS5385Ljlf5CXTQT5j6qYZtP8ut1Benaae8TMH17txP0CfzHbUMJFnHA1+Nru+e/Pw
      yPwuQ+VZYlXOB7g/tKVVZsxAYTKCAOJvJMIE+nlHjpB+RsKs9z4ZzVtddntqqAcvbZxV/o7
      azBFDizeJu/gHVVMncCJ00SRoOzCOZUABRJV/k68bNSAfpELkrdWx8/xvMIF8r+LWhwdKCS
      iOw4DjSwIK40yD5rOvQn/GlC+unyB8zFe60jCToz/UOJNZBiIYwo+Pwwx28Wqd4Jkb3IeDr
      /L2Q=="
  }]
}</span></pre>
            </div>

            <p>
                If the creation of the DID was successful, an HTTP 201 status code is expected in return:
            </p>

            <div class="example">
                <div class="example-title marker"><span>Example 10</span><span style="text-transform: none">: Successful DID creation response</span></div>
                <pre class="highlight hljs http" aria-busy="false" aria-live="polite">HTTP/1.1 <span class="hljs-number">201</span> Created
<span class="hljs-attribute">Location</span>: https://ledger.example.com/dids/did:v1:215cb1dc-1f44-4695-a07f-97649cad9938
<span class="hljs-attribute">Cache-Control</span>: no-cache, no-store, must-revalidate
<span class="hljs-attribute">Pragma</span>: no-cache
<span class="hljs-attribute">Expires</span>: 0
<span class="hljs-attribute">Date</span>: Fri, 14 Oct 2016 18:35:33 GMT
<span class="hljs-attribute">Connection</span>: keep-alive
<span class="hljs-attribute">Transfer-Encoding</span>: chunked</pre>
            </div>

        </section>

        <section id="updating-a-did-document">
            <h3 id="x4.3-updating-a-did-document"><span class="secno">4.3 </span>Updating a DID Document</h3>

            <p>
                A DID is updated by performing an HTTP POST of a signed DID Document to the <code>veresOneUpdateService</code>. The following HTTP status codes are defined for this service:
            </p>

            <table class="simple">
                <thead>
                    <tr>
                        <th style="white-space: nowrap">HTTP Status</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>200</td>
                        <td>
                            DID update request was successful.
                        </td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>DID update request failed.</td>
                    </tr>
                </tbody>
            </table>

            <p>
                An example exchange for a DID update request is shown below:
            </p>

            <div class="example">
                <div class="example-title marker"><span>Example 11</span><span style="text-transform: none">: DID Document update request</span></div>
                <pre class="highlight hljs http" aria-busy="false" aria-live="polite"><span class="hljs-keyword">POST</span> <span class="hljs-string">/dids/did:v1:215cb1dc-1f44-4695-a07f-97649cad9938</span> HTTP/1.1
<span class="hljs-attribute">Host</span>: example.com
<span class="hljs-attribute">Content-Type</span>: application/ld+json
<span class="hljs-attribute">Content-Length</span>: 1062
<span class="hljs-attribute">Accept</span>: application/ld+json, application/json, text/plain, */*
<span class="hljs-attribute">Accept-Encoding</span>: gzip, deflate

<span class="undefined">{
  "@context": "https://w3id.org/webledger/v1",
  "type": "WebLedgerEvent",
  "operation": "Update",
  "input": [{
    "@context": "https://w3id.org/veres-one/v1",
    "id": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84",
    "authorizationCapability": [{
      "permission": "UpdateDidDocument",
      "entity": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84",
      "permittedProofType": [{
        "proofType": "LinkedDataSignature2015"
      }, {
        "proofType": "EquihashProof2017",
        "equihashParameterAlgorithm": "VeresOne2017"
      }]
    }],
    "authenticationCredential": [{
      "id": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84/keys/1",
      "type": "CryptographicKey",
      "owner": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84",
      "publicKeyPem": "-----BEGIN PUBLIC KEY-----\r\n
        MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAmbDqPu6IKHiiIQ4d0AQ6\r\n
        PBduDhUUVqyQirvxqsdcNdKgZ2L8whBml/nTyuB4cd+hHrsfMDiHiT5kX2pbZ7Yy\r\n
        2ctWkGw8e0J94CbwVh2H15gBQBUCjLiGvVIHO2pni693qmre+3Ya2NJ8gGwPLJ7h\r\n
        TLca2b2dX0y16qu0MT0osUGGEoPsdg6ibD2pxnADS3GNPObHT12GrAuxjYFMHecF\r\n
        A4hLZ8U+MIcVmHZuokqqbcyJyjOV+kmhFNeTKFP5P5U8HA3Y42/rE1UJp/wyy7Lc\r\n
        ZAvq0t75ddXKyvYh5dkzxxeeELNKNWVxJ2yvgAr0SatLEPzxJoeYdCyU5N5E22Fj\r\n
        jQIDAQAB\r\n-----END PUBLIC KEY-----\r\n"
    }, {
      "id": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84/keys/2",
      "type": "CryptographicKey",
      "owner": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84",
      "publicKeyPem": "-----BEGIN PUBLIC KEY-----\r\n
        MIIBIj0BAQEFAKHiiIQ4d0AQ6ANBgkqhkiG9wAOCAQ8AMIIBCgKCAQEAmbDqPu6I\r\n
        xqsdcNdKgZ2L8whBml/nTyuBiHiPBduDhUUVqyQirvT5kX2pbZ7Yy4cd+hHrsfMD\r\n
        VhVIHO2pni693qmre+2ctWkGw8e0J94Cbw3Ya2NJ8gGwPLJ7hH15gBQBUCjLiGv\r\n
        0osUNPObHT12GrAuxjYFMHecFGTLca2b2dX0y16qu0MTGEoPsdg6ibD2pxnADS3G\r\n
        kqqbcyJyjOV+kmh8HA3Y42/rE1UJpA4hLZ8U+MIcVmHZuo/wyy7LcFNeTKFP5P5U\r\n
        5dkzxxezxJoeYdCyU5N5E2ZAvq0t75ddXKyvYh2FjeELNKNWVxJ2yvgAr0SatLEP\r\n
        AQABjQID\r\n-----END PUBLIC KEY-----\r\n"
    }]
  }],
  "signature": [{
    "type": "EquihashProof2017",
    "equihashParameterN": 64,
    "equihashParameterK": 3,
    "nonce": "AQAAAA==",
    "proofValue": "AAAaPwABxrIAAFOKAAGo4QAAVW0AAN7cAACXcgABjEI="
  }, {
    "type": "LinkedDataSignature2015",
    "created": "2017-09-30T02:54:31Z",
    "creator": "did:v1:770f2d84-5e62-4caa-af95-111a3205bc84/keys/2",
    "signatureValue": "Zg7o26UYnyGYTvKdSN6hcpZnm9cGvSZB+hJFhXzSer/S+XkMbsPqLn
      VMncCJ00SRoOzCOZUABRJV/azBFDizeJu/gHVk68bNSAfpELkrdWx8/xvMIF8r+LWhwdKCS
      XTQT5j6qYZtP8ut1BenahNhXisS5385Ljlf5Cae8TMH17txP0CfzHbUMJFnHA1+Nru+e/Pw
      K40yD5rOvQn/GlC+unyB8ziOw4DjSwIFe60jCToz/UOJNZBiIYwo+Pwwx28Wqd4Jkb3IeDr
      VVZsxAYTKCAOJvJMIE+nlHjpB+RyPwuQ+VZYlXOB7g/tKsKs9z4ZzVtddntqqAcvbZxV/o7
      /45H=="
  }]
}</span></pre>
            </div>

            <p>
                If the update request for the DID was successful, an HTTP 200 status code is expected in return:
            </p>

            <div class="example">
                <div class="example-title marker"><span>Example 12</span><span style="text-transform: none">: Successful ledger creation response</span></div>
                <pre class="highlight hljs http" aria-busy="false" aria-live="polite">HTTP/1.1 <span class="hljs-number">200</span> Success
<span class="hljs-attribute">Cache-Control</span>: no-cache, no-store, must-revalidate
<span class="hljs-attribute">Pragma</span>: no-cache
<span class="hljs-attribute">Expires</span>: 0
<span class="hljs-attribute">Date</span>: Fri, 14 Oct 2016 18:35:33 GMT
<span class="hljs-attribute">Connection</span>: keep-alive
<span class="hljs-attribute">Transfer-Encoding</span>: chunked</pre>
            </div>

        </section>

        <section id="delegating-control">
            <h3 id="x4.4-delegating-control"><span class="secno">4.4 </span>Delegating Control</h3>

            <div class="issue" id="issue-3">
                <div class="issue-title marker" aria-level="4" role="heading" id="h-issue3"><span>Issue 3</span></div>
                <p class="">
                    TBD: Explain that delegation of control is merely placing a digital wallet provider in the proofOfControl field.
                </p>
            </div>
        </section>

        <section id="key-rotation-and-transferring-control">
            <h3 id="x4.5-key-rotation-and-transferring-control"><span class="secno">4.5 </span>Key Rotation and Transferring Control</h3>

            <div class="issue" id="issue-4">
                <div class="issue-title marker" aria-level="4" role="heading" id="h-issue4"><span>Issue 4</span></div>
                <p class="">
                    TBD: Explain that transferring control and rotating keys is a matter of adding and removing the appropriate keys from proofofControl and proofOfUpdateAuthorization.
                </p>
            </div>
        </section>

        <section id="recovering-a-did">
            <h3 id="x4.6-recovering-a-did"><span class="secno">4.6 </span>Recovering a DID</h3>

            <div class="issue" id="issue-5">
                <div class="issue-title marker" aria-level="4" role="heading" id="h-issue5"><span>Issue 5</span></div>
                <p class="">
                    TBD: Explain that recoverying a DID is a matter of meeting the requirements under proofOfUpdateAuthorization.
                </p>
            </div>
        </section>

    </section>

    <section id="appendix-a:-examples">
        <!--OddPage-->
        <h2 id="x5.-appendix-a:-examples"><span class="secno">5. </span>Appendix A: Examples</h2>

        <section id="typical-did-document">
            <h3 id="x5.1-typical-did-document"><span class="secno">5.1 </span>Typical DID Document</h3>

            <p>
                The following is a complete example of a typical Veres One DID Document:
            </p>

            <div class="example">
                <div class="example-title marker"><span>Example 13</span></div>
                <pre class="nohighlight">{
  "@context": "https://w3id.org/veres-one/v1",
  "id": "did:v1:eaaf4df5-471d-404e-b143-652fe38cd2c7",
  "authorizationCapability": [{
    "permission": "UpdateDidDocument",
    "entity": "did:v1:eaaf4df5-471d-404e-b143-652fe38cd2c7",
    "permittedProofType": [{
      "proofType": "LinkedDataSignature2015"
    }, {
      "proofType": "EquihashProof2017",
      "equihashParameterAlgorithm": "VeresOne2017"
    }]
  }],
  "authenticationCredential": [{
    "id": "did:v1:eaaf4df5-471d-404e-b143-652fe38cd2c7/keys/1",
    "type": "CryptographicKey",
    "owner": "did:v1:eaaf4df5-471d-404e-b143-652fe38cd2c7",
    "publicKeyPem": "-----BEGIN PUBLIC KEY-----\r\n
      MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAvZXq8jX38lwndvzadCsT\r\n
      Xa2Zafdrg9I69gzfccH6XWY3Ddi/JoMuTSB1GwxKBfXpo9gjaPYsm6wCLv9Kku4x\r\n
      HL4LA1kmIalVTVDYgSO4sGK9k9oQNTY+hgUoTtdMxMShWrVy6+DIS/ZzIPyQBtbm\r\n
      9D7RojrvESmjq/OuMs6sTlC0JjEE1ijuuHY+iY7gDYcR7RGFAsi4WGbCVy6c8VqL\r\n
      29h8yGps2U+AxKr9f783VGMCk469ESHVwVyw6Jbxihn/h4TH3ZH8WTQW9rpS9GhO\r\n
      euSAA6iSH5UcmAzJZKSzaC+oghEJwMtOcgvr1F9iSn9tuHebgy9R6tHvEChhvdgz\r\n
      2wIDAQAB\r\n
      -----END PUBLIC KEY-----\r\n",
  }]
}</pre>
            </div>
        </section>

        <section id="legacy-did-document">
            <h3 id="x5.2-legacy-did-document"><span class="secno">5.2 </span>Legacy DID Document</h3>

            <p>
                The Veres One ledger was launched in 2015, predated this specification, and as a result has a number of legacy objects that developers should be aware of. The typical format for these objects are shown below:
            </p>

            <div class="example">
                <div class="example-title marker"><span>Example 14</span></div>
                <pre class="nohighlight">{
  "@context": "https://w3id.org/identity/v1",
  "id": "did:8743453f-e45e-4ac6-b85f-4513ba4c1460",
  "idp": "did:d1d1d1d1-d1d1-d1d1-d1d1-d1d1d1d1d1d1",
  "accessControl": {
    "writePermission": [
      {
        "id": "did:8743453f-e45e-4ac6-b85f-4513ba4c1460/keys/1",
        "type": "CryptographicKey"
      },
      {
        "id": "did:d1d1d1d1-d1d1-d1d1-d1d1-d1d1d1d1d1d1",
        "type": "Identity"
      }
    ]
  },
  "publicKey": [
    {
      "id": "did:8743453f-e45e-4ac6-b85f-4513ba4c1460/keys/1",
      "type": "CryptographicKey",
      "owner": "did:8743453f-e45e-4ac6-b85f-4513ba4c1460",
      "publicKeyPem": "-----BEGIN PUBLIC KEY-----\r\nMIIBIjA...DAQAB\r\n-----END PUBLIC KEY-----\r\n",
      "@context": "https://w3id.org/identity/v1"
    }
  ],
  "signature": {
    "type": "LinkedDataSignature2015",
    "created": "2017-07-25T17:29:49Z",
    "creator": "did:8743453f-e45e-4ac6-b85f-4513ba4c1460/keys/1",
    "signatureValue": "LJoxpV...daOLHbA=="
  }
}</pre>
            </div>
        </section>

    </section>



    <p role="navigation" id="back-to-top"><a href="#toc"><abbr title="Back to Top">â†‘</abbr></a></p>
    <script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
</body>

</html>
