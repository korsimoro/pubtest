<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Representing IoT devices in BigchainDB using DID - RWoT DIR Launchpad</title>
    <link href="../../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Representing IoT devices in BigchainDB using DID", url: "#_top", children: [
              {title: "1. Representation of a device", url: "#1-representation-of-a-device" },
              {title: "2 Registration of a new device in BDB", url: "#2-registration-of-a-new-device-in-bdb" },
              {title: "3. Device Messages", url: "#3-device-messages" },
              {title: "4. DID method spec translation for BDB", url: "#4-did-method-spec-translation-for-bdb" },
              {title: "5. Note", url: "#5-note" },
          ]},
        ];

    </script>
    <script src="../../../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    <h1 id="representing-iot-devices-in-bigchaindb-using-did">Representing IoT devices in BigchainDB using DID</h1>
<p>This document defines key methods for registering and maintaining identity of "things" (IoT devices) in BigchainDB (BDB) using Decentralized Identifiers (DIDs).</p>
<h2 id="1-representation-of-a-device">1. Representation of a device</h2>
<h3 id="11-relationship-with-the-registrant">1.1 Relationship with the registrant</h3>
<p>The devices' DID will have the <em>guardian</em> control from the user. Which means the device or thing being registered will be a dependent of the registrant user.</p>
<p>Example:</p>
<pre><code>{
    &quot;@context&quot;: &quot;https://example.org/did/v1&quot;,
    &quot;id&quot;: &quot;did:example:21tDAKCERh95uGgKbJNHYp&quot;,
    &quot;guardian&quot;: &quot;did:example:8uQhQMGzWxR8vw5P3UWH1j&quot;

    ...
}
</code></pre>

<blockquote>
<p>Here the user with DID <code>did:example:8uQhQMGzWxR8vw5P3UWH1j</code> is expected to be already registered in the ledger.</p>
</blockquote>
<h3 id="12-inside-a-bdb-transaction">1.2 Inside a BDB Transaction</h3>
<p>The DDO of the device/thing will be wrapped in the metadata of the asset in BDB transaction. Also, in the metadata, device specific details can be stored.</p>
<p>Example:</p>
<blockquote>
<p>The following metadata object has the device details (here a car) in the __data_ field and the DDO under the __did_ field.</p>
</blockquote>
<pre><code>&quot;metadata&quot;: {
        &quot;_data&quot;: {
            &quot;capacity&quot;: 4,
            &quot;color&quot;: &quot;white&quot;,
            &quot;oem&quot;: &quot;BMW&quot;,
            &quot;vehicletype&quot;: &quot;car_sedan&quot;,
            &quot;model&quot;: &quot;X12017&quot;
            &quot;vin&quot;: &quot;WBA7F2C51GGE12249&quot;
        },
        &quot;_did&quot;: {
            &quot;@context&quot;: &quot;https://example.org/did/v1&quot;,
            &quot;id&quot;: &quot;did:example:21tDAKCERh95uGgKbJNHYp&quot;,
            &quot;guardian&quot;: &quot;did:example:8uQhQMGzWxR8vw5P3UWH1j&quot;,
            &quot;created&quot;: &quot;2017-08-21T08:00:13.370Z&quot;,
            &quot;updated&quot;: &quot;2017-08-21T08:00:13.370Z&quot;,
            &quot;signature&quot;: {
                &quot;type&quot;: &quot;&quot;,
                &quot;created&quot;: &quot;&quot;,
                &quot;creator&quot;: &quot;&quot;,
                &quot;signatureValue&quot;: &quot;&quot;
            }
        }
    }
</code></pre>

<p>The asset of the BDB transaction will have the schema and namespace for this device representation.</p>
<pre><code>&quot;asset&quot;: {
        &quot;data&quot;: {
            &quot;ns&quot;: &quot;bdb.assets.did.car&quot;,
            &quot;schema&quot;: &quot;https://example.org/did/v1&quot;
        }

</code></pre>

<h2 id="2-registration-of-a-new-device-in-bdb">2 Registration of a new device in BDB</h2>
<p>The registration of a new device will be a <em>CREATE</em> transaction operation with the data and DDO wrapped in metadata (see section 1, above)</p>
<h3 id="21-control-of-device-by-administrators">2.1 Control of device by administrators</h3>
<p>The <em>control</em> field of the DDO can be used for assigning one or more administrators to the device which can change the DDO of the device - in case of a admin override when keys are expired or lost.</p>
<blockquote>
<p>The control DID(s) should also be checked/validated in BDB.</p>
</blockquote>
<h3 id="22-owner-property-of-ddo">2.2 Owner property of DDO</h3>
<p>The devices will be <em><strong>associated</strong></em> with the registrant using the <em>guardian</em> field of the DDO, however the <em>owner</em> field of the DDO will have the public key of the device itself. This will be used for verifying messages coming from the device which are signed by the device's private key. Hence, <strong>both guardian and owner fields of the DDO will be utilized</strong>.</p>
<h3 id="23-service-property-of-ddo">2.3 Service property of DDO</h3>
<p>The <em>service</em> property of the device DDO can be used for,</p>
<ol>
<li>
<p>Identification of the endpoint where the device will publish messages</p>
</li>
<li>
<p>Identification of the schema uri for the device messages</p>
</li>
</ol>
<p>Example:</p>
<pre><code>&quot;service&quot;: {
        &quot;node&quot;: &quot;10:20:30:40:443/iot/messages&quot;,
        &quot;schema&quot;: &quot;https://example.message.schema&quot;
    }

</code></pre>

<h2 id="3-device-messages">3. Device Messages</h2>
<p>The messages/telemetry coming from the devices will have the device DID and the payload will be signed by the device's private key.</p>
<p>Example:</p>
<pre><code>{
    &quot;deviceId&quot;: &quot;did:example:21tDAKCERh95uGgKbJNHYp&quot;
    &quot;payload&quot;: &quot;&lt;signed payload&gt;&quot;
}

</code></pre>

<h2 id="4-did-method-spec-translation-for-bdb">4. DID method spec translation for BDB</h2>
<ol>
<li>
<p><strong>Create</strong> - Create will be a BDB Create Transaction as defined above in section 2.</p>
</li>
<li>
<p><strong>Read/Resolve</strong> - It will be a query on BDB with the asset Id corresponding to the DID of the device.</p>
</li>
<li>
<p><strong>Update</strong> - Transfer transaction with same to and from public keys, this will be used to update the metadata of the asset in the said transaction, which also holds the DDO.</p>
</li>
<li>
<p><strong>Control</strong> - Can be implemented using a crypto condition and fullfillment - similar to how inputs and outputs work for assets. For example: if the condition is fulfilled, then th e DDO can be changed.</p>
</li>
</ol>
<h2 id="5-note">5. Note</h2>
<ol>
<li>
<p>This is a work in progress.</p>
</li>
<li>
<p>This is not a full DID method spec.</p>
</li>
<li>
<p>The DID spec underwent a revamp in RWOT 5 and this document/spec needs to be updated accordingly.</p>
</li>
</ol>

  <br>
</div>

<footer class="col-md-12 wm-page-content"><p>All of the contents of this directory are licensed CC-BY their contributors, unless otherwise noted.</p>
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>