<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>DID Auth Overview - RWoT DIR Launchpad</title>
    <link href="../../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "DID Auth Overview", url: "#_top", children: [
          ]},
          {title: "Introduction", url: "#introduction", children: [
          ]},
          {title: "Terminology", url: "#terminology", children: [
          ]},
          {title: "Use Cases", url: "#use-cases", children: [
              {title: "Two-Step", url: "#two-step" },
              {title: "One-Step", url: "#one-step" },
              {title: "Device Configurations", url: "#device-configurations" },
              {title: "Flow 1", url: "#flow-1" },
              {title: "Flow 2", url: "#flow-2" },
              {title: "Flow 3", url: "#flow-3" },
              {title: "Flow 4", url: "#flow-4" },
              {title: "Flow 5", url: "#flow-5" },
              {title: "Flow 6", url: "#flow-6" },
          ]},
          {title: "Requirements", url: "#requirements", children: [
          ]},
          {title: "Payload Example", url: "#payload-example", children: [
              {title: "Challenge", url: "#challenge" },
              {title: "Response", url: "#response" },
          ]},
          {title: "Protocol Diagrams", url: "#protocol-diagrams", children: [
          ]},
          {title: "Multi-Device Orchestration", url: "#multi-device-orchestration", children: [
          ]},
          {title: "Standards Alignment", url: "#standards-alignment", children: [
          ]},
          {title: "Notes &amp; Further Issues", url: "#notes-further-issues", children: [
              {title: "Driving Adoption", url: "#driving-adoption" },
          ]},
        ];

    </script>
    <script src="../../../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    <h1 id="did-auth-overview">DID Auth Overview</h1>
<ul>
<li>James Monaghan, Evernym</li>
<li>Manu Sporny, Digital Bazaar</li>
</ul>
<h1 id="introduction">Introduction</h1>
<p>Quick summary of the points from the <a href="../../../Topics/did-auth/">topic paper</a>:
* Everyone's doing "blockchain auth" already. We want to standardise on DIDs, and we need interoperability on authentication before we can hope to have interoperability on exchanging verifiable claims and other more sophisticated transactions. We should therefore be doing DID Auth.
* Here's how you authenticate between a client and server by proving control over a DID.</p>
<p><img alt="did-auth" src="../../supporting-files/did-auth.jpg" /></p>
<h1 id="terminology">Terminology</h1>
<ul>
<li>Authentication Client - the means by which a user responds to an authentication challenge</li>
<li>Content Server - the protected resource the user is seeking to access</li>
<li>Challenge Endpoint - the means by which an authentication challenge is delivered to the user (typically a URI stored in DDO)</li>
</ul>
<p><img alt="actors" src="../../supporting-files/did-auth-actors.jpg" /></p>
<h1 id="use-cases">Use Cases</h1>
<h2 id="two-step">Two-Step</h2>
<h3 id="registration">Registration</h3>
<p>TODO: includes making a connection?</p>
<h3 id="authentication">Authentication</h3>
<h2 id="one-step">One-Step</h2>
<h2 id="device-configurations">Device Configurations</h2>
<table>
<tr>
<td> Scenario </td><td> Logging in with </td><td> Authentication Client </td><td> Challenge Channel </td><td> Notes </td>
</tr><tr>
<td> 1 </td><td> web browser </td><td> same browser </td><td> same browser </td><td> The user is accessing some content with a web browser, and authenticating themselves using the same browser </td>
</tr><tr>
<td> 2 </td><td> web browser </td><td> mobile browser </td><td> mobile browser </td><td> The user is accessing some content with a web browser (most likely a laptop or tablet), and authenticating themselves using a browser on a separate device (most likely their mobile phone) - orchestrating that is the user's responsibility </td>
</tr><tr>
<td> 3 </td><td> web browser </td><td> mobile app </td><td> mobile app </td><td> The user is accessing some content with a web browser, and is authenticating themselves using an app on their mobile device - orchestrating that is the user's responsibility </td>
</tr><tr>
<td> 4 </td><td> mobile app </td><td> mobile app </td><td> mobile app </td><td> The user is accessing some content with an app, and is authenticating themselves using a different app - orchestrated via inter-app messaging </td>
</tr><tr>
<td> 5 </td><td> web browser </td><td> same browser </td><td> Challenge Endpoint (in DDO) </td><td> Not sure what this one is? </td>
</tr><tr>
<td> 6 </td><td> mobile app </td><td> Challenge Endpoint </td><td> Challenge Endpoint (in DDO) </td><td> The user is accessing some content with a web browser, and is authenticating themselves using a client (probably a mobile app) which is connected to the Challenge Endpoint </td>
</tr>
</table>

<h2 id="flow-1">Flow 1</h2>
<p><img alt="flow-1" src="../../supporting-files/did-auth-flow-1.jpg" /></p>
<h2 id="flow-2">Flow 2</h2>
<h2 id="flow-3">Flow 3</h2>
<p><img alt="flow-3" src="../../supporting-files/did-auth-flow-3.jpg" /></p>
<p>Orchestration (steps 6 &amp; 8) may involve scanning a QR code, communication via Bluetooth, etc.</p>
<h2 id="flow-4">Flow 4</h2>
<h2 id="flow-5">Flow 5</h2>
<h2 id="flow-6">Flow 6</h2>
<p><img alt="flow-6" src="../../supporting-files/did-auth-flow-6.jpg" /></p>
<p>This assumes the Content Server is already aware of the DID (or it is communicated in step 1).</p>
<h1 id="requirements">Requirements</h1>
<ul>
<li>MUST be able to cryptographically prove control over a DID</li>
<li>Need to support multiple DID methods (the method specs should contain enough detail to determine which key proves control, and which signature scheme is appropriate)</li>
<li>MUST be able to use a web browser with no extensions to authenticate</li>
<li>MUST be able to use an app to authenticate</li>
<li>MUST be able to use a secondary device to authenticate a session on your primary device</li>
</ul>
<h1 id="payload-example">Payload Example</h1>
<p>These are protocol feature requirements, to be augmented with examples:</p>
<h2 id="challenge">Challenge</h2>
<ul>
<li>Will be a lightweight "verifiable claim request" payload</li>
<li>Should be able to specify the DID (for returning users), although this is not required since the DID will be included in the response</li>
<li>Should be able to specify the nonce to be signed, although this is not required since it is possible to deterministically generate nonces using a pre-agree scheme</li>
<li>Do we want to include explicit support for using timestamps?</li>
<li>Should be able to request additional attributes to be included in the response claim (or do we want to avoid the drama of designing how that works?)</li>
<li>You might want a key to have been endorsed by a trusted party who certifies the user really has control (e.g. Yubikey)</li>
<li>Should be able to include credentials (in the form of verifiable claims?) demonstrating the credibility of the Content Server which is requesting authentication</li>
<li>May specify a particular public key?</li>
<li>the user may have several keys associated with a DID, and they are proving control of a DID not a specific key, so we will <em>not</em> set the expectation that the user must use the same key each time</li>
<li>if the user responds using a different key than the one the content server requests (they may choose to, or they may have to because they have rotated keys), the content server may perform further authentication (for example, requesting another factor)</li>
<li>Must be able to deliver the challenge in-band (direct to the user's browser) and out-of-band (to the service endpoint specified by the DDO)</li>
<li>Must include the endpoint where the response should be sent</li>
</ul>
<h2 id="response">Response</h2>
<ul>
<li>Will be a verifiable claim</li>
<li>Must contain the DID</li>
<li>May contain other attributes requested (although clients can elect not to provide these)</li>
<li>Signature uses a scheme appropriate to the DID?</li>
<li>Signature includes the nonce</li>
</ul>
<h1 id="protocol-diagrams">Protocol Diagrams</h1>
<h1 id="multi-device-orchestration">Multi-Device Orchestration</h1>
<p>TODO: at least a way to use QR codes to link a browser session to a mobile device</p>
<h1 id="standards-alignment">Standards Alignment</h1>
<p>TODO explain alignment with (and improvements over) other standards (and non-standard implementations):
* Web auth / FIDO / JWT/JWS
* DID spec / DID service discovery
* (SQRL, BitID, etc)</p>
<h1 id="notes-further-issues">Notes &amp; Further Issues</h1>
<ul>
<li>Need to show the enrolment/registration flow as well as the login/authentication flow</li>
<li>How to detect the context (is this an in-band or out-of-band authentication)?</li>
<li>Need to account for delays in the protocol (poor connectivity, need for MFA, etc)</li>
<li>Need to call out the privacy implications of using timestamps for nonces</li>
<li>Heard lots of good ideas on Thursday for making sure this is useful for more than just websites - need to capture that</li>
</ul>
<h2 id="driving-adoption">Driving Adoption</h2>
<ul>
<li>"DID Auth" is a terrible name for marketing purposes - consumers will never go for it</li>
<li>"Super Sign-On" is nice</li>
<li>Do we need a logo, trust mark, UX guidelines to drive adoption?</li>
<li>Use a trademark to drive conformance (avoid OpenID "issues")</li>
<li>Want to avoid "NASCAR syndrome" with login buttons</li>
<li>Can the Content Server be aware of the authentication methods available to the user so it can display appropriate options? This has privacy implications.</li>
<li>Should collect a list of apps from the RWOT community which have implemented flows <em>similar</em> to this, and ask them to pledge compliance:</li>
<li>Digital Bazaar / Authorization.io</li>
<li>uPort</li>
<li>Evernym</li>
<li>Dappre</li>
<li>Aevatar</li>
<li>Consent?</li>
</ul>

  <br>
</div>

<footer class="col-md-12 wm-page-content"><p>All of the contents of this directory are licensed CC-BY their contributors, unless otherwise noted.</p>
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>