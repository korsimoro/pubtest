<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>DID Method Spec Template Definition - RWoT DIR Launchpad</title>
    <link href="../../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../../../js/jquery-3.2.1.min.js"></script>
    <script src="../../../js/bootstrap-3.3.7.min.js"></script>
    <script src="../../../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Introduction", url: "#_top", children: [
          ]},
          {title: "ReSpec", url: "#respec", children: [
          ]},
          {title: "Notation", url: "#notation", children: [
          ]},
          {title: "[Name] DID Method Specification V[x]", url: "#name-did-method-specification-vx", children: [
          ]},
          {title: "[Author], [Affiliation]", url: "#author-affiliation", children: [
          ]},
          {title: "Preface", url: "#preface", children: [
          ]},
          {title: "Abstract", url: "#abstract", children: [
          ]},
          {title: "Introduction (Informative)", url: "#introduction-informative", children: [
          ]},
          {title: "Examples (Informative)", url: "#examples-informative", children: [
          ]},
          {title: "Target System(s)", url: "#target-systems", children: [
          ]},
          {title: "DID Method Name", url: "#did-method-name", children: [
          ]},
          {title: "DID Method Namespace Specific Identifier (NSI)", url: "#did-method-namespace-specific-identifier-nsi", children: [
              {title: "Namestring Generation Method", url: "#namestring-generation-method" },
              {title: "ABNF Definition", url: "#abnf-definition" },
              {title: "Example", url: "#example" },
          ]},
          {title: "JSON-LD Context Definition", url: "#json-ld-context-definition", children: [
          ]},
          {title: "CRUD Operation Definitions", url: "#crud-operation-definitions", children: [
              {title: "Create (Register)", url: "#create-register" },
              {title: "Read (Resolve)", url: "#read-resolve" },
              {title: "Update", url: "#update" },
              {title: "Delete (Revoke)", url: "#delete-revoke" },
          ]},
          {title: "Versioning", url: "#versioning", children: [
              {title: "Version of this Specification", url: "#version-of-this-specification" },
              {title: "Version of the JSON-LD Context", url: "#version-of-the-json-ld-context" },
          ]},
          {title: "Security Considerations", url: "#security-considerations", children: [
              {title: "attacks and their residual risks", url: "#attacks-and-their-residual-risks" },
          ]},
          {title: "Privacy Considerations", url: "#privacy-considerations", children: [
          ]},
          {title: "Reference Implementations", url: "#reference-implementations", children: [
          ]},
          {title: "Links and Resources", url: "#links-and-resources", children: [
          ]},
          {title: "Acknowledgements", url: "#acknowledgements", children: [
          ]},
        ];

    </script>
    <script src="../../../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

    <p>DID Method Spec Template Definition</p>
<p>2017-10-05</p>
<p><em>A paper from the DID Specification working group at Rebooting the Web of Trust #5, Boston, MA, USA.</em></p>
<h1 id="introduction">Introduction</h1>
<p>This paper represents the consensus of the authors of several DID method specifications about the recommended template for a DID method specification. For background on DIDs (Decentralized Identifiers) and DID methods, please see the <a href="https://github.com/WebOfTrustInfo/rebooting-the-web-of-trust-fall2017/blob/master/topics-and-advance-readings/did-primer.md">DID Primer</a>.</p>
<p>Our i document will be contributed to the W3C Credentials Community Group in order to be turned into a template specification document published in ReSpec format.</p>
<h1 id="respec">ReSpec</h1>
<p>It is RECOMMENDED to use the <a href="https://github.com/w3c/respec/wiki">ReSpec</a> format for a DID method specification. The authors of this paper intend to create the template defined in this paper in the ReSpec format and contribute that template to the W3C Credentials Community Group.</p>
<h1 id="notation">Notation</h1>
<p>In the following template, plain text and headers should appear in every method spec. Variables are denoted in [square brackets]. Explanatory comments are highlighted in <em>italics</em>. Examples of section content content appear in [[[ three square brackets ]]].</p>
<p>...................Template begins immediately below this line.........................</p>
<h1 id="name-did-method-specification-vx"><em>[Name]</em> DID Method Specification V<em>[x]</em></h1>
<h1 id="author-affiliation"><em>[Author], [Affiliation]</em></h1>
<h1 id="preface">Preface</h1>
<p>This is a DID method specification that conforms to the requirements specified in the <a href="https://w3c-ccg.github.io/did-spec/">DID specification</a> currently published by the W3C Credentials Community Group. For more information about DIDs and DID method specifications, please see the <a href="https://github.com/WebOfTrustInfo/rebooting-the-web-of-trust-fall2017/blob/master/topics-and-advance-readings/did-primer.md">DID Primer</a>.</p>
<h1 id="abstract">Abstract</h1>
<p><em>(recommended)</em></p>
<p>[[[ The Bitcoin Reference (btcr) method for managing DIDs on Bitcoin is formally specified. ]]]</p>
<h1 id="introduction-informative">Introduction (Informative)</h1>
<p>[[[ Managing DIDs on Bitcoin requires transactions with these characteristics: … Once a transaction has been submitted … Details follow. ]]]</p>
<h1 id="examples-informative">Examples (Informative)</h1>
<p><em>(examples of DID documents or other artifacts used by this method; prefer short ones)</em></p>
<h1 id="target-systems">Target System(s)</h1>
<p><em>(Describe the system or systems which are the target of this DID method. The target system may be any DLT or other distributed network or other system capable of supporting the CRUD operations. This section should also specify any constraints it assumes or imposes on the target system.)</em></p>
<p>[[[ This targets Bitcoin consensus rules exactly equal to the ones in binary X with hash Y. (Any time the binary changes, the spec will have to be updated accordingly, to clarify how it relates to forks and other evolution.) ]]]</p>
<h1 id="did-method-name">DID Method Name</h1>
<p>The namestring that shall identify this DID method is:</p>
<pre><code>[[[ btcr ]]]
</code></pre>
<p>A DID that uses this method MUST begin with the following prefix:</p>
<pre><code>[[[ did:btcr ]]]
</code></pre>
<p>Per the DID specification, this string MUST be in lowercase.</p>
<h1 id="did-method-namespace-specific-identifier-nsi">DID Method Namespace Specific Identifier (NSI)</h1>
<p><em>(This section describes how DIDs in this method are formatted, parsed, and generated. For example, are they sequences of 31 digits, or 24 alphanumerics? How is uniqueness guaranteed? Etc.</em></p>
<h2 id="namestring-generation-method">Namestring Generation Method</h2>
<p><em>(definition of how the NSI is generated under this method) </em></p>
<h2 id="abnf-definition">ABNF Definition</h2>
<p><em>(section contains an ABNF definition of the NSI; if there is a canonical regex, it could also be noted here)</em></p>
<h2 id="example">Example</h2>
<p><em>(include at least one example of a DID that conforms to your spec's rules)</em></p>
<h1 id="json-ld-context-definition">JSON-LD Context Definition</h1>
<p><em>(If your method involves storing any state in a DID document for purposes of controlling updates to the DID document, you MUST define a JSON-LD context in this section.)</em></p>
<p>[[[ The official definition of the btcr JSON-LD context is:
<pre>
{
   "@context":
   {
      "Person": "http://xmlns.com/foaf/0.1/Person",
      "xsd": "http://www.w3.org/2001/XMLSchema#",
      "name": "http://xmlns.com/foaf/0.1/name",
      "nickname": "http://xmlns.com/foaf/0.1/nick",
      "affiliation": "http://schema.org/affiliation",
      "depiction":
      {
         "@id": "http://xmlns.com/foaf/0.1/depiction",
         "@type": "@id"
      },
      "image":
      {
         "@id": "http://xmlns.com/foaf/0.1/img",
         "@type": "@id"
      }</p>
<p>}
</pre></p>
<p>With minor edits, this is published at <a href="https://example.com/mycontext.jsonld">https://example.com/mycontext.jsonld</a>.  Changes are expected as this template evolves... ]]]</p>
<h1 id="crud-operation-definitions">CRUD Operation Definitions</h1>
<h2 id="create-register">Create (Register)</h2>
<p><em>(<a href="https://w3c-ccg.github.io/did-spec/#create">Instructions from the DID spec: </a>The DID method specification must specify how a client creates a DID record—the combination of a DID and its associated DDO—on the target system, including all cryptographic operations necessary to establish proof of ownership.)</em></p>
<p>[[[ To create a DID, you must submit a transaction that looks like this: …</p>
<p>The transaction must be signed <in the following way>, and must meet these additional requirements: …</p>
<p>Possible outcomes from the creation operation include: 0 "Success", error 1 “Malformed transaction”, error 2 “Permission denied”... ]]]</p>
<h2 id="read-resolve">Read (Resolve)</h2>
<p><em>(<a href="https://w3c-ccg.github.io/did-spec/#read/verify">Instructions from the DID Spec: </a> The DID method specification must specify how a client uses a DID to request a DDO from the target system, including how the client can verify the authenticity of the response.</p>
<p>This section should define both lookup of a DID document from a DID and how to cryptographically verify the response.)</em></p>
<p>[[[ Anyone can read a DID, using the following procedure: …</p>
<p>Be aware of the following latency issues: … To help manage latency wisely, the response includes a proof of correctness at a given timestamp, which works like this: ... ]]]</p>
<h2 id="update">Update</h2>
<p><em>(<a href="https://w3c-ccg.github.io/did-spec/#update">Instructions from the DID Spec: </a>The DID method specification must specify how a client can update a DID record on the target system, including all cryptographic operations necessary to establish proof of control.</p>
<p>The DID Specification does not prescribe any single DID Document update mechanism, but a mechanism SHOULD be chosen to support key recovery.  </p>
<p>Some early implementations relied on permissions that could not be attenuated in a composable manner.  Veres One uses a narrower capacity as follows:</p>
<p>"The authorizationCapability field must contain a capability for the delegate that includes UpdateDidDocument as the capability, the DID of the delegate as the entity, and may include a more specific set of authenticationCredentials that the delegate may use to authenticate when updating the DID Document."</p>
<p>We're trying to NOT suggest anything other than a fully composable capability attenuation system as Best Practices.  Chris Webber proposed a workable system based on certificate chaining, but there are no current examples using the idea.  A paper is forthcoming.)</em></p>
<h2 id="delete-revoke">Delete (Revoke)</h2>
<p><em>(The method spec MUST define how to revoke a DID. Revocation is non-reversible--do not confuse it with key rotation. For example, how would you handle the DID for a company that has declared bankruptcy?.)</em></p>
<p><em><a href="https://w3c-ccg.github.io/did-spec/#delete/revoke">Instructions from the DID spec: </a>Although a core feature of distributed ledgers is immutability, the DID method specification must specify how a client can revoke a DID record on the target system, including all cryptographic operations necessary to establish proof of revocation.</p>
<p>Revocation is the one way final operation for a DID.  No use after revocation is an equivalent problem to the double-spend problem, which is what motivates the use of blockchains and other distributed ledger technologies.</em></p>
<h1 id="versioning">Versioning</h1>
<h2 id="version-of-this-specification">Version of this Specification</h2>
<p><em>(Define how this spec will be versioned. This SHOULD be by using the ReSpec template and standard ReSpec versioning mechanism.</em></p>
<h2 id="version-of-the-json-ld-context">Version of the JSON-LD Context</h2>
<p><em>(Define how your JSON-LD context will be versioned. This MUST use the mechansim defined in the DID spec.)</em></p>
<h1 id="security-considerations">Security Considerations</h1>
<p><em>(<a href="https://w3c-ccg.github.io/did-spec/#security-considerations">See requirements in the DID spec</a></em></p>
<h3 id="attacks-and-their-residual-risks">attacks and their residual risks</h3>
<p>*At least the following forms of attack MUST be considered: eavesdropping, replay, message insertion, deletion, modification, impersonation, and man-in-the-middle.  Potential denial of service attacks MUST be identified as well.  If the protocol incorporates cryptographic protection mechanisms, it should be clearly indicated which portions of the data are protected and what the protections are (i.e., integrity only, confidentiality, and/or endpoint authentication, etc.).  Some indication should also be given to what sorts of attacks the cryptographic protection is susceptible.  Data which should be held secret (keying material, random seeds, etc.) should be clearly labeled. If the technology involves authentication, particularly user-host authentication, the security of the authentication method MUST be clearly specified.</p>
<p>residual risks (such as the risks from compromise in a related protocol, incorrect implementation, or cipher) after threat mitigation has been deployed.</p>
<p>Recovery from a key compromise MUST be addressed.</p>
<p>This section MUST provide integrity protection and update authentication for all operations required by Section 7 of this specification (DID Operations).</p>
<pre>
Confused Deputy Problem

  When attempting separation of writeAuthorization from authenticationCredential. 

  [https://en.wikipedia.org/wiki/Confused_deputy_problem](https://en.wikipedia.org/wiki/Confused_deputy_problem)
</pre>

<p>Other sections from DID spec to incorporate into the outline:</p>
<pre><code>9.3 Authentication Service Endpoints
9.4 Non-Repudiation
9.5 Notification of DDO Changes
9.6 Key and Signature Expiration
9.7 Key Revocation and Recovery *
</code></pre>
</pre>

<h1 id="privacy-considerations">Privacy Considerations</h1>
<p><a href="https://w3c-ccg.github.io/did-spec/#privacy-considerations">[See requirements in the DID spec]</a></p>
<pre><code>10. Privacy Considerations
10.1 Requirements of DID Method Specifications
10.2 Keep Personally-Identifiable Information (PII) Off-Ledger
10.3 DID Correlation Risks and Pseudonymous DIDs
10.4 DDO Correlation Risks
10.5 Herd Privacy
</code></pre>
<p><em>Consider all 4 types of privacy in http://www.lifewithalacrity.com/2015/04/the-four-kinds-of-privacy.html.</em></p>
<h1 id="reference-implementations">Reference Implementations</h1>
<p>[[[ The code at <a href="https://github.com/myaccount/myrepo">https://github.com/myaccount/myrepo</a> is intended to be the preferred embodiment of this DID method. Commit hash 4fc87fc5e85b2a071abfa7d8dfb15c06cd266dd5 is the version that officially aligns with this version of the spec.</p>
<p>Note that the code includes a test suite (see tests/compliance_suite); any other implementations should ensure that all tests pass before they claim compatibility. ]]]</p>
<h1 id="links-and-resources">Links and Resources</h1>
<p>[[[ Issues/bugs for this spec, and for the reference implementation, are managed on github at <a href="https://github.com/myaccount/myrepo/issues">https://github.com/myaccount/myrepo/issues</a>. Many developers maintaining the code and spec tend to hang out in RocketChat at chat.myorg.org, #btcrimpl. ]]]</p>
<h1 id="acknowledgements">Acknowledgements</h1>

  <br>
</div>

<footer class="col-md-12 wm-page-content"><p>All of the contents of this directory are licensed CC-BY their contributors, unless otherwise noted.</p>
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>